# 論理を電気で表す

論理とは何でしょうか？論理の歴史は非常に古いので、あまり込み入った話はしませんが、一般的なイメージとして。さらに古典的な論理とは、真と偽を扱う学問らしいです。元々は概念を扱う学問ということもあって、我々はどこで手を動かしていいのかわかりません。そこで、論理を電気で表すことにします。

真と偽は、それぞれLEDの光っている状態と光っていない状態で表すことにしましょう。あくまで定義なので、逆でもいいですが直感的な方が実験の成功確率は上がるので、こちらがおすすめです。

我々がこれまで実践したのは、スイッチを使って電気が流れるか流れないかということです。そこから論理にどうつながるのでしょうか？

複数のスイッチを組み合わせることでコンピュータの基礎ができあがります。

## シンプルな論理
イメージしやすい最もシンプルな3つの論理を紹介します。あまり直感的ではないかもしれないですが、論理また、真理値表というものを紹介します。

### 真理値表
すでに各論理の真理値表を紹介しましたが、真理値表は、論理の結果を表にしたものです。真理値表を見ると、論理の結果がわかりやすくなります。
真理値表では、真を1、偽を0で表し、表の左側に入力、右側に出力を書きます。そのため、

| 入力1 | 入力2 | 出力(例:AND) |
|---|---|-----|
| 0 | 0 | 0   |
| 0 | 1 | 0   |
| 1 | 0 | 0   |
| 1 | 1 | 1   |

となります。A、Bはスイッチの名前として利用していましたが、スイッチを通ったあとはそのスイッチが設定した状態が入力として利用されます。

### AND(論理積)
AとBのスイッチがあったとします。AとBのスイッチがいずれもONになったら、LEDが光るということにしましょう。これはANDと呼ばれます。ANDは論理積とも呼ばれます。日本語で論理を表現するときには「かつ」という言い方もします。
これを電気の回路で作るときの仕様は「AのスイッチがONかつBのスイッチがONになったら、LEDが光る」ということになります。

| A | B | AND |
|---|---|-----|
| 0 | 0 | 0   |
| 0 | 1 | 0   |
| 1 | 0 | 0   |
| 1 | 1 | 1   |

TODO: 図を入れる

### OR(論理和)
AとBのスイッチがあったとします。AとBのスイッチのどちらかがONになったら、LEDが光るということにしましょう。これはORと呼ばれます。ORは論理和とも呼ばれます。日本語で論理を表現するときには「または」という言い方もします。
これを電気の回路で作るときの仕様は「AのスイッチがONまたはBのスイッチがONになったら、LEDが光る」ということになります。

| A | B | OR  |
|---|---|-----|
| 0 | 0 | 0   |
| 0 | 1 | 1   |
| 1 | 0 | 1   |
| 1 | 1 | 1   |

TODO: 図を入れる

### NOT(否定)
Aのスイッチがあったとします。AのスイッチがOFFになったら、LEDが光るということにしましょう。これはNOTと呼ばれます。NOTは否定とも呼ばれます。日本語で論理を表現するときには「でなければ」という言い方もします。

| A | NOT |
|---|-----|
| 0 | 1   |
| 1 | 0   |

TODO: 図を入れる

## 実験1 (シンプルな論理を電気回路で表す)
実際に、電気回路を使って論理を表現し実際に動かしてみましょう。以下の手順に従って、回路を作成してください。
論理回路を作ること、スイッチが正しく作れたことを確認することを目的とします。
必要な素材は、電池、LED、抵抗、電線、厚紙、マジックペン、セロハンテープ、アルミホイル、抵抗です。

| 部品 | 説明 |
|---|---|
| 電池 | 論理回路の電源として使います |
| 抵抗 | 電流を制限するために使います |
| LED | 論理回路が正しく作れたことをLEDの明滅で確認するために使います |
| 電線 | 電池とLEDとスイッチとをつなぐために使います |
| ブレッドボード | 部品の固定と導通のために使います |

#### AND回路

#### OR回路

#### NOT回路

## すこし複雑な論理

次に、少しイメージしにくい論理を紹介します。

### XOR

AとBのスイッチがあったとします。AとBのスイッチのどちらかがONかつもう一方がOFFになったら、LEDが光るということにしましょう。これはXORと呼ばれます。XORは排他的論理和とも呼ばれます。日本語で論理を表現するときには「どちらか一方」という言い方もします。

| A | B | XOR |
|---|---|-----|
| 0 | 0 | 0   |
| 0 | 1 | 1   |
| 1 | 0 | 1   |
| 1 | 1 | 0   |

TODO: 図を入れる

### NAND

AとBのスイッチがあったとします。AとBのスイッチがいずれもONになったら、LEDが*光らない*ということにしましょう。これはNANDと呼ばれます。NANDは否定論理積とも呼ばれます。日本語で論理を表現するときには「かつでない」という言い方もします。がぜんぜん聞き慣れないですね。

| A | B | NAND |
|---|---|-----|
| 0 | 0 | 1   |
| 0 | 1 | 1   |
| 1 | 0 | 1   |
| 1 | 1 | 0   |

### NOR

AとBのスイッチがあったとします。AとBのスイッチのどちらかがONになったら、LEDが*光らない*ということにしましょう。これはNORと呼ばれます。NORは否定論理和とも呼ばれます。日本語で論理を表現するときには「またはでない」という言い方もします。がこちらも全然聞き慣れないですね。

| A | B | NOR |
|---|---|-----|
| 0 | 0 | 1   |
| 0 | 1 | 0   |
| 1 | 0 | 0   |
| 1 | 1 | 0   |


### まとめ

お気づきかもしれないですが、NANDとNORはANDとORの否定です。

| A | B | AND | NAND |
|---|---|-----|------|
| 0 | 0 | 0   | 1    |
| 0 | 1 | 0   | 1    |
| 1 | 0 | 0   | 1    |
| 1 | 1 | 1   | 0    |

| A | B | OR  | NOR |
|---|---|-----|-----|
| 0 | 0 | 0   | 1   |
| 0 | 1 | 1   | 0   |
| 1 | 0 | 1   | 0   |
| 1 | 1 | 1   | 0   |

このことからも、基本的な論理演算の組み合わせで複雑な論理演算を実現できることがわかります。
ただ、このあたりから実際にシンプルな材料で回路を組み立てるのは難しくなってきますね。

このような組み合わせを図表で表すことができたほうがこの先便利そうです。大丈夫、そんなものがあります。
* 

### 実際にやってみる前に

実際にやってみる際に使う電子部品を簡単に説明します。電子部品(not 電気部品)は電子の振る舞いによって作用する部品で、コンピュータの中に文字通り山程入っています。ここでは、半導体と行きがかり上ダイオードを紹介し、最後に実際に実験に使うトランジスタを紹介します。

#### 半導体

後ほど紹介するダイオードとトランジスタと呼ばれる電子部品は、主に導体でも絶縁体でもない素材、半導体でできています。半導体はシリコン(Si)などで作られることが多いですが、シリコンの採掘や半導体に仕立て上げるために結晶化する作業は個人が手を動かしてできる範囲を逸脱してしまうので今回は取り扱わないことにします。

半導体には、N型半導体とP型半導体があります。N型半導体は余った電子を持つ半導体です。そのため、電子を自由に動き回らせることができます。P型半導体は正孔という電子の欠損を自由に動き回らせることができます。実質的には電子が動き回って正孔を埋めると元いた場所が正孔になるという振る舞いを繰り返していると思えば直感的になります。この、N型半導体とP型半導体を組み合わせることで、電気を通すか通さないかを制御することができます。

TODO: 図を入れる

まず、電子の性質として、電子はマイナスの電荷を帯びていて、マイナスの電荷を帯びているところにはプラスの電荷を帯びたものが引き寄せられます。逆にプラスの電荷を帯びたものはマイナスの電荷を帯びているもの、つまり電子を引き寄せることができます。

TODO: 図を入れる

ここまでで半導体がなにかは何もわからんから早く実例で教えろと思うと思います。そこで、半導体の性質を利用した電子部品を紹介します。

#### ダイオード

ダイオードとは半導体の性質を利用して、一方向にしか電流を流さないようにした電子部品です。ダイオードは、N型半導体とP型半導体を組み合わせたものです。

TODO: 図を入れる

ダイオードはN型半導体とP型半導体を隣り合わせに接合して作られています。その結果、何が起きるかというと、N側からP側に電子が流れている状態、つまりN側に電池のマイナス極、P側に電池のプラス極を繋いだ場合には電流が流れます。逆にN側に電池のプラス極、P側に電池のマイナス極を繋いだ場合には電流が流れません。

P型半導体は正孔が自由に動くため、電池のマイナス極をつなぐと、正孔が電池のマイナス極側に引っ張られます。N型半導体は電子が自由に動くため、電池のプラス極をつなぐと、電子が電池のプラス極側に引っ張られます。このとき、NとPを繋いでいる部分には正孔も電子もほぼない状態になり電流が流れません。ダイオードはこの性質を利用しています。

ただ、今回やりたいことは電流を制御したいことなので、ダイオードだけだと不十分です。更に複雑な電子部品、トランジスタを紹介します。

#### トランジスタ

トランジスタは1947年にベル研究所のショックリー、ブラッテン、バーディーンの3人によって発明されました。トランジスタは、電子の性質を利用して、電流を制御する電子部品です。トランジスタは、N型半導体とP型半導体を組み合わせたものです。現代ではとても小さくなっていて、コンピュータの中には数十億個も入っています。なんでそんなに必要なのかは次第にわかってきます。

TODO: 図を入れる

この図のようにN型-P型-N型(NPN型)やP型-N型-P型(PNP型)のようにいずれかの半導体をもう一方の半導体で挟んだような形で作られています。
先程、ダイオードの例で学んだ通り、正孔か電子のいずれかが端から端まで動けると電流が流れることになります。

ここでは、NPN型を例に振る舞いを確認してみましょう。

TODO: 図を入れる

NPN型のトランジスタでは、各半導体それぞれに外部に接続できる電極がついていて、それぞれコレクタ、ベース、エミッタと呼ばれています。コレクタとエミッタはN型半導体に、ベースはP型半導体に電極がついていることになります。コレクタには電池のプラス極、エミッタには電池のマイナス極をそれぞれ繋ぎ、ベースには別の電池からつながるスイッチを繋ぎます。ここでやりたいことは、スイッチをオンにしたときにコレクタとエミッタの間に電流が流れることです。

基本的な考え方としては、正孔と電子が集まると電流が流れる、電流は電子の動きと逆方向ということを意識してください。

スイッチがオンのときの振る舞い: 
- ベース-エミッタ間に順方向電圧（VBE）を印加すると、エミッタの電子（－の電荷）がベースに流れ込む
- 一部の電子がベースの正孔（+の電荷）と結合し、ベース電流が流れる
- ベース（P型半導体）は構造的に薄く作られており、エミッタからベースに流入してきた電子の多くはコレクタに抜け出してしまう
- コレクタ-エミッタ間電圧によって電子（－の電荷）が誘導されてコレクタ電極方向に移動します。これがコレクタ電流ICとなる

スイッチがオフのときの振る舞い:
- ベース-エミッタ間に電圧がないが、コレクタ-エミッタ間には電圧があるため、エミッタの電子はベースとの接合部に流れ込む
- ベースとエミッタの間には電圧がないので電子はベースに留まる
- コレクタ-エミッタ間電圧（VCE）によって電子（－の電荷）が誘導されてコレクタ電極方向に移動するが、ベースの電子が動かないため、コレクタ電流ICは流れない

### 実験

ここでは、トランジスタという電子部品を使って、XOR回路、NAND回路、NOR回路を作ってみましょう。
トランジスタは、ベースにスイッチをつなぐことで電気的なスイッチとして振る舞い（スイッチング動作）ます。今回は論理の挙動を確認するために、トランジスタを使った回路で論理を実現してみましょう。

https://akizukidenshi.com/catalog/g/gI-17089/

Next: クロックを発生させる

## Reference

- [優しくない論理学](https://www.nakanihon.co.jp/gijyutsu/Shimada/easylogic/index.html)
- [n型半導体、p型半導体とは](https://www.shindengen.co.jp/products/semi/column/basic/semi/rectifying_action.html)
